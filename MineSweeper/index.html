<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì§€ë¢°ì°¾ê¸°</title>
    <style>
        body{
            padding: 50px;
        }
        table{
            border: 15px solid #EEE;
            border-collapse: collapse;
        }
        td{
            padding:0;
            margin:0;
            border-spacing: 0;
            border:1px solid #DDD;
            border-collapse: collapse;
            margin: 0;
            height:40px;
            width:40px;
            text-align: center;
            cursor:pointer;
        }
        .bomb{
            background-color: red;
            /*color:#FFF;*/
        }
    </style>
</head>
<body>
    <table >
        <tbody id="board">

        </tbody>
    </table>
<script>

    /* ê²Œìž„ ì„¸íŒ… */
    const boardSize = {
        w : 10,
        h : 12
    };
    const bombCnt = 30;


    /* ì§€ë¢° ì •ë³´ */
    const cellCnt = boardSize.w * boardSize.h;

    let cellArr = [];
    for(let i = 0; i < cellCnt; i++){
        cellArr[i] = i;
    }

    let bombArr = [];
    for(let i = 0; i < bombCnt; i++){
        const randNum = Math.floor(Math.random() * (cellCnt - i));
        bombArr.push(cellArr[randNum]);
        cellArr.splice(randNum,1);
    }


    /* ì§€ë¢°ë°­ ì •ë³´ */



    let cellData = new Array(cellCnt);

    function getCellData(){

        /**
         * ìœ„ì¹˜ íƒ€ìž…
         * ëª¨ì„œë¦¬ : ì¢Œìƒ, ìš°ìƒ, ì¢Œí•˜, ìš°í•˜
         * ëª¨ì„œë¦¬ë¥¼ ì œì™¸í•œ ì¤„ ë¼ì¸: ìœ—ì¤„, ì´ëž«ì¤„, ì™¼ì¤„, ì˜¤ë¥¸ì¤„
         * ê¸°íƒ€ 9ì¹¸
         */

        for(let row = 0; row< boardSize.h; row ++){

            for(let col = 0; col< boardSize.w; col ++){

                const index = row * boardSize.w + col;

                const lastRow = boardSize.h-1;
                const lastCol = boardSize.w-1;

                let position = '';

                if(row === 0){
                    if      (col === 0)         position = 'topLeft';
                    else if (col === lastCol)	position = 'topRight';
                    else                        position = 'topLine';
                }

                else if(row === lastRow){
                    if      (col === 0)         position = 'bottomLeft';
                    else if (col === lastCol)	position = 'bottomRight';
                    else                        position = 'bottomLine';
                }

                else{
                    if      (col === 0)         position = 'leftLine';
                    else if (col === lastCol)	position = 'rightLine';
                    else                        position = 'inside';
                }

                cellData[index] = position;
            }

        };
    }

    getCellData();

    function getSurroundCell(index){

        const position = cellData[index];
        const surroundCell = [];

        switch (position) {
            case 'topLeft' :
                surroundCell.push(1, boardSize.w);
                break;

            default :
                console.log('inside');
                break;
        }
        return surroundCell;

    }

    /* ì§€ë¢°ë°­ ìƒì„± */
    const boardTable = document.getElementById('board');

    let boardElement = ''
    for(let i = 0; i< boardSize.h; i ++){
        boardElement +='<tr>';
        for(let j = 0; j< boardSize.w; j ++){
            const boxIndex = i*boardSize.w + j;
            let styleClass = '';
            let textContent = boxIndex;
//			var textContent = 'ðŸš©';
            if(bombArr.indexOf(boxIndex) > -1){
                styleClass='bomb';
                textContent = 'ðŸ’£'
            }
            if(boxIndex === bombArr[0]){
                styleClass='';
                textContent = 'ðŸš©';
            }
            // document.createElement('td');
            boardElement +="<td data-index='" + boxIndex + "' class='" + styleClass + "'>" + textContent + "</td>";
        }
        boardElement +='</tr>';
    };


    boardTable.innerHTML = boardElement;


    /* í´ë¦­ ì´ë²¤íŠ¸ */
    boardTable.addEventListener('click', function(e){
        handleClickCell(Number(e.target.dataset.index));
    })

    function handleClickCell(index){
        const surroundCell = getSurroundCell(index);
        console.log(surroundCell);

        // if(bombArr.indexOf(Number(index)) > -1){
        //     alert('ì§€ë¢°ë¥¼ ë°Ÿì•˜ì–´ìš”');
        // }else{
        //     console.log(index);
        // }
    }

    function rightClick(){

    }

    function cellColoring(index, bgColor) {
        const cell = boardTable.querySelector("[data-index='"+index+"']");
        cell.style.backgroundColor = bgColor
    }



</script>
</body>
</html>